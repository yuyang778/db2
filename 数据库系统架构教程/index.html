<!DOCTYPE html>
<html lang="zh-CN">
    <script src="page-protector.js"></script>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>数据库系统架构图示</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        
        h1 {
            color: #2c3e50;
            text-align: center;
            margin-bottom: 30px;
        }
        
        h2 {
            color: #3498db;
            border-bottom: 2px solid #3498db;
            padding-bottom: 5px;
            margin-top: 40px;
        }
        
        .architecture-container {
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            padding: 20px;
            margin-bottom: 30px;
        }
        
        .level {
            margin-bottom: 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
            overflow: hidden;
        }
        
        .level-header {
            background-color: #3498db;
            color: white;
            padding: 12px 15px;
            cursor: pointer;
            font-weight: bold;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .level-header:hover {
            background-color: #2980b9;
        }
        
        .level-content {
            padding: 15px;
            background-color: #f9f9f9;
            display: none;
        }
        
        .level-content.show {
            display: block;
        }
        
        .example {
            background-color: white;
            border-left: 4px solid #3498db;
            padding: 10px 15px;
            margin: 10px 0;
        }
        
        .comparison-container {
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            padding: 20px;
        }
        
        .slider-container {
            position: relative;
            height: 300px;
            margin: 30px 0;
        }
        
        .slider {
            width: 100%;
            margin: 20px 0;
        }
        
        .db-type {
            position: absolute;
            width: 45%;
            padding: 15px;
            background-color: white;
            border-radius: 5px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
        }
        
        .relational {
            left: 0;
            border-top: 4px solid #e74c3c;
        }
        
        .non-relational {
            right: 0;
            border-top: 4px solid #2ecc71;
        }
        
        .db-title {
            font-weight: bold;
            margin-bottom: 10px;
            text-align: center;
        }
        
        .feature-list {
            list-style-type: none;
            padding: 0;
        }
        
        .feature-list li {
            padding: 5px 0;
            border-bottom: 1px dashed #eee;
        }
        
        .feature-list li:last-child {
            border-bottom: none;
        }
        
        .diagram {
            text-align: center;
            margin: 20px 0;
        }
        
        .diagram img {
            max-width: 100%;
            height: auto;
        }
        
        .toggle-icon {
            transition: transform 0.3s ease;
        }
        
        .level-header.active .toggle-icon {
            transform: rotate(180deg);
        }
    </style>
</head>
<body>
    <h1>数据库系统架构图示</h1>
    
    <div class="architecture-container">
        <h2>数据库系统三级模式结构</h2>
        
        <div class="diagram">
            <svg width="400" height="300" viewBox="0 0 400 300">
                <!-- 内模式 -->
                <rect x="100" y="220" width="200" height="50" fill="#e74c3c" opacity="0.7" />
                <text x="200" y="250" text-anchor="middle" fill="white" font-weight="bold">内模式</text>
                
                <!-- 模式 -->
                <rect x="100" y="150" width="200" height="50" fill="#3498db" opacity="0.7" />
                <text x="200" y="180" text-anchor="middle" fill="white" font-weight="bold">模式</text>
                
                <!-- 外模式 -->
                <rect x="100" y="80" width="200" height="50" fill="#2ecc71" opacity="0.7" />
                <text x="200" y="110" text-anchor="middle" fill="white" font-weight="bold">外模式</text>
                
                <!-- 连接线 -->
                <line x1="200" y1="150" x2="200" y2="220" stroke="#7f8c8d" stroke-width="2" />
                <line x1="200" y1="80" x2="200" y2="150" stroke="#7f8c8d" stroke-width="2" />
                
                <!-- 映射 -->
                <text x="200" y="140" text-anchor="middle" fill="#7f8c8d" font-size="12">模式/内模式映射</text>
                <text x="200" y="70" text-anchor="middle" fill="#7f8c8d" font-size="12">外模式/模式映射</text>
            </svg>
        </div>
        
        <div class="level">
            <div class="level-header" onclick="toggleLevel(this)">
                <span>外模式 (External Schema)</span>
                <span class="toggle-icon">▼</span>
            </div>
            <div class="level-content">
                <p>外模式是数据库用户（包括应用程序员和最终用户）能够看见和使用的局部数据的逻辑结构和特征的描述，是数据库用户的数据视图。</p>
                
                <div class="example">
                    <strong>实例：学生信息系统的不同视图</strong>
                    <ul>
                        <li><strong>教务处视图：</strong> 学号、姓名、专业、班级、所有课程成绩</li>
                        <li><strong>学生视图：</strong> 学号、姓名、已选课程、成绩</li>
                        <li><strong>教师视图：</strong> 课程号、课程名、选课学生名单、成绩</li>
                    </ul>
                </div>
            </div>
        </div>
        
        <div class="level">
            <div class="level-header" onclick="toggleLevel(this)">
                <span>模式 (Conceptual Schema)</span>
                <span class="toggle-icon">▼</span>
            </div>
            <div class="level-content">
                <p>模式是数据库中全体数据的逻辑结构和特征的描述，是所有用户的公共数据视图。它描述的是数据的全局逻辑结构。</p>
                
                <div class="example">
                    <strong>实例：大学数据库的全局模式</strong>
                    <pre>
学生(学号, 姓名, 性别, 出生日期, 专业, 班级)
课程(课程号, 课程名, 学分, 开课院系)
选课(学号, 课程号, 成绩, 学期)
教师(工号, 姓名, 职称, 院系)
授课(工号, 课程号, 学期, 教室)
                    </pre>
                </div>
            </div>
        </div>
        
        <div class="level">
            <div class="level-header" onclick="toggleLevel(this)">
                <span>内模式 (Internal Schema)</span>
                <span class="toggle-icon">▼</span>
            </div>
            <div class="level-content">
                <p>内模式是数据物理结构和存储方式的描述，是数据在数据库内部的表示方式。它定义所有的内部记录类型、索引和文件的组织方式，以及数据控制方面的细节。</p>
                
                <div class="example">
                    <strong>实例：学生表的物理存储结构</strong>
                    <ul>
                        <li><strong>存储文件：</strong> STUDENT.dat (定长记录，每个记录200字节)</li>
                        <li><strong>索引：</strong> B+树索引 on 学号，哈希索引 on 专业</li>
                        <li><strong>存储方式：</strong> 按专业聚簇存储，每个专业的学生连续存放</li>
                        <li><strong>缓冲区：</strong> LRU算法管理，大小8MB</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
    
    <div class="comparison-container">
        <h2>关系型 vs 非关系型数据库比较</h2>
        <p>拖动滑块查看两种数据库类型的特性对比：</p>
        
        <input type="range" min="0" max="100" value="50" class="slider" id="dbComparisonSlider">
        
        <div class="slider-container">
            <div class="db-type relational">
                <div class="db-title">关系型数据库 (RDBMS)</div>
                <ul class="feature-list">
                    <li>基于表格的结构化数据</li>
                    <li>严格的预定义模式</li>
                    <li>SQL查询语言</li>
                    <li>ACID事务保证</li>
                    <li>适合复杂查询</li>
                    <li>垂直扩展为主</li>
                    <li>示例: MySQL, PostgreSQL, Oracle</li>
                </ul>
            </div>
            
            <div class="db-type non-relational">
                <div class="db-title">非关系型数据库 (NoSQL)</div>
                <ul class="feature-list">
                    <li>灵活的数据模型</li>
                    <li>动态模式或无模式</li>
                    <li>特定领域查询语言</li>
                    <li>BASE原则(基本可用)</li>
                    <li>适合大规模数据</li>
                    <li>水平扩展能力强</li>
                    <li>示例: MongoDB, Cassandra, Redis</li>
                </ul>
            </div>
        </div>
    </div>
    
    <script>
        // 切换三级模式的显示/隐藏
        function toggleLevel(header) {
            header.classList.toggle("active");
            const content = header.nextElementSibling;
            content.classList.toggle("show");
        }
        
        // 初始化显示第一个层级的内容
        document.querySelector(".level-header").click();
        
        // 数据库类型比较滑块效果
        const slider = document.getElementById("dbComparisonSlider");
        const relational = document.querySelector(".relational");
        const nonRelational = document.querySelector(".non-relational");
        
        slider.addEventListener("input", function() {
            const value = this.value;
            
            // 计算两个面板的位置和透明度
            const relationalPos = -5 + (value / 100 * 10);
            const nonRelationalPos = 95 - (value / 100 * 10);
            
            const relationalOpacity = 1 - (value / 100 * 0.3);
            const nonRelationalOpacity = 0.7 + (value / 100 * 0.3);
            
            // 应用样式变化
            relational.style.left = `${relationalPos}%`;
            relational.style.opacity = relationalOpacity;
            
            nonRelational.style.right = `${nonRelationalPos}%`;
            nonRelational.style.opacity = nonRelationalOpacity;
        });
    </script>
</body>
</html>