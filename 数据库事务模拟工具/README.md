# SQL Server 数据库事务模拟器

这是一个基于Web的SQL Server数据库事务模拟器，用于演示和学习数据库事务的ACID特性和不同隔离级别下的并发问题。

## 功能特点

- 模拟SQL Server的四种事务隔离级别：读未提交、读已提交、可重复读和串行化
- 可视化展示事务的执行过程和结果
- 演示数据库并发问题：脏读、不可重复读、幻读和丢失更新
- 提供交互式界面，支持手动控制事务的开始、提交和回滚
- 实时日志记录，展示事务执行的每一步操作

## 使用方法

1. 在浏览器中打开`index.html`文件
2. 界面包含以下几个部分：
   - 事务隔离级别选择区域
   - 数据库表显示区域
   - 事务模拟控制面板
   - 并发问题演示区域

### 手动模拟事务

1. 选择所需的事务隔离级别（默认为"读已提交"）
2. 点击"应用隔离级别"按钮
3. 在事务面板中点击"开始事务"按钮开始一个事务
4. 使用"读取账户"和"更新账户"按钮执行事务操作
5. 最后选择"提交事务"或"回滚事务"完成事务

### 自动演示并发问题

点击以下按钮自动演示不同的并发问题：
- "脏读演示"：展示在读未提交隔离级别下的脏读问题
- "不可重复读演示"：展示在读已提交隔离级别下的不可重复读问题
- "幻读演示"：展示在可重复读隔离级别下的幻读问题
- "丢失更新演示"：展示并发事务导致的丢失更新问题

点击"重置演示"可以将模拟器恢复到初始状态。

## 隔离级别说明

1. **读未提交（Read Uncommitted）**
   - 最低的隔离级别
   - 允许脏读（一个事务可以读取另一个未提交事务的数据）
   - 不需要加锁，性能最好，但数据一致性最差

2. **读已提交（Read Committed）**
   - SQL Server的默认隔离级别
   - 防止脏读，但允许不可重复读和幻读
   - 只能读取已经提交的数据

3. **可重复读（Repeatable Read）**
   - 防止脏读和不可重复读，但允许幻读
   - 确保在事务期间读取的数据不会改变

4. **串行化（Serializable）**
   - 最高的隔离级别
   - 防止脏读、不可重复读和幻读
   - 事务完全隔离执行，性能最差但一致性最好

## 并发问题说明

1. **脏读（Dirty Read）**
   - 当一个事务读取了另一个事务未提交的数据
   - 如果该事务回滚，则读取的数据无效

2. **不可重复读（Non-repeatable Read）**
   - 当一个事务多次读取同一数据，但在这期间另一个事务修改了数据并提交
   - 导致第一个事务两次读取的结果不一致

3. **幻读（Phantom Read）**
   - 当一个事务第一次查询得到一些数据，但第二次同样的查询得到了不同的结果集
   - 通常是因为其他事务在这期间插入或删除了数据行

4. **丢失更新（Lost Update）**
   - 当两个事务同时读取然后更新相同的数据
   - 后提交的事务会覆盖先提交事务的更新

## 模拟器实现说明

本模拟器使用HTML、CSS和JavaScript实现，完全在浏览器中运行，不需要服务器支持。主要文件包括：

- `index.html`：页面结构和布局
- `script.js`：事务逻辑和演示功能
- `README.md`：使用说明文档

模拟器通过JavaScript对象模拟了数据库表、事务和锁机制，可以有效展示数据库事务的基本概念和并发问题。 